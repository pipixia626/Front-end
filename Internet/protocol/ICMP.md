# ICMP协议 互联网控制消息协议

用于TCP/IP网络中发送控制消息，提供可能发生在通信环境中的各种问题反馈，通过这些信息，
使网络管理着可以对所发生的问题作出诊断然后采取适当的措施解决问题

ICMP虽然是网络层协议，但是不像IP协议和ARP协议一样直接传递给数据链路层，而是先封装成IP数据包然后再传递
数据链路层（IP数据包协议类型字段的值是1）

## Ping命令
确定网络的连通性，确定网络是否正确连接以及网络连接状况

1:向目的服务器发送回显请求
2：目的服务器发送回显应答
3：源服务器显示相关数据

## traceroute

掌握使用 traceroute 命令测量路由情况的技能，即用来显示数据包到达目的主机所经过的路径。

### 原理
利用 IP 包的 TTL 从 1 开始按照顺序递增的同时发送 UDP 包，强制接收 ICMP 超时消息的方法

### 其他计算机网络命令

#### arp

#### ifconfig

#### nslookup
查询任何一台机器的 IP 地址和其对应的域名

#### netstat
了解网络当前的状态
### nbtstat
可以查看计算机上网络配置的一些信息

## 分类

### 查询报文类型
查询报文主要应用于：ping查询、子网掩码查询、时间戳查询等等

### 差错报文类型
差错报文主要产生于当数据传送发送错误的时候。

它包括：目标不可达（网络不可达、主机不可达、协议不可达、端口不可达、禁止分片等）、超时、参数问题、重定向（网络重定向、主机重定向等）等等。

差错报文通常包含了引起错误的IP数据包的第一个分片的IP首部，加上该分片数据部分的前8个字节。

当传送IP数据包发生错误的时候（例如 主机不可达），ICMP协议就会把错误信息封包，然后传送回源主机，那么源主机就知道该怎么处理了。
