# 缓存

## 7.1 冗余的数据传输
服务器会多次传输同一份文档

## 7.2 带宽瓶颈

## 7.3 瞬间拥塞

## 7.4 距离时延

## 7.5 命中和未命中

用已有的副本未某些到达缓存的请求提供服务，称为缓存命中，其他一些到达缓存的请求可能会由于没有副本可以用，而被转发给原始服务器，这被称为缓存未命中

### 7.5.1 再验证
缓存可以在任意时刻以任意频率对副本进行再验证，由于缓存中通常
对缓存的副本进行再验证时，会向原始服务器发送一个小的再验证请求，如果内容没有变化，服务器会以一个小的304响应包进行响应，只要缓存知道副仍然有效，就会再次将副本标识为暂时新鲜的，并将副本提供给客户端，这被称为再验证命中

再验证未命中  HTTP 304
再验证命中   HTTP 200 OK
对象被删除    404

### 7.5.2 私有缓存和公有缓存


## 7.7 缓存的处理步骤
1. 接收，缓存从网络中读取抵达的请求报文
2. 解析 对报文进行解析，提取URL和各种首部
3. 查询 缓存查看是否有本地副本可以用，没有就读取一份并保存到本地
4. 新鲜度检查缓存查看以缓存副本是否足够信息，不是就询问服务器是否有任何更新
5. 创建响应 缓存会用新的首部和已缓存的主体来构建一条响应报文
6. 发送
7. 日志
